# 数据库配置
DATABASE_URL=postgresql://username:password@localhost:5432/forum_db

# JWT 配置
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars
JWT_ACCESS_EXPIRATION=900
JWT_REFRESH_EXPIRATION=604800

# 服务配置
HOST=127.0.0.1
PORT=3000

# Redis 配置 (可选)
REDIS_URL=redis://localhost:6379

# 上传目录
UPLOAD_DIR=./uploads

# 日志
RUST_LOG=debug
# 日志格式: "pretty" (默认) 或 "json"
LOG_FORMAT=pretty

# 数据库连接池
DB_MAX_CONNECTIONS=10
DB_MIN_CONNECTIONS=2

# CORS 来源 (逗号分隔, 默认 "*")
CORS_ORIGINS=*

# 限流配置
RATE_LIMIT_ENABLED=true
# 单参数：支持全局 "10:20" 或分组 "auth=5:10,public=30:60,protected=10:20"
RATE_LIMIT_CONFIG=auth=5:10,public=30:60,protected=10:20

# 认证 Cookie 配置（用于 HttpOnly JWT）
AUTH_COOKIE_SECURE=false
AUTH_COOKIE_SAMESITE=Lax
# AUTH_COOKIE_DOMAIN=example.com

# 安全响应头
# CSP_POLICY=default-src 'self'; base-uri 'self'; frame-ancestors 'none'; object-src 'none'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' ws: wss:
ENABLE_HSTS=true

# 是否要求邮箱验证 (true/false, 1/0). 默认 false（关闭验证，注册后可直接登录/使用）
REQUIRE_EMAIL_VERIFICATION=false

# PoW 配置（用于投票接口防刷/防爬）
POW_SECRET=change-me-to-a-long-random-string
POW_TTL_SECONDS=120
POW_DIFFICULTY=20

# 帖子排序权重（作者积分加权）
# hot/top 排序时，会在原分数基础上叠加： (ln(max(karma,0)+1) * POST_AUTHOR_KARMA_WEIGHT)
POST_AUTHOR_KARMA_WEIGHT=0.2

# 启动时自动创建/提升管理员（方案A）。若库中已存在任意 admin，则不会再自动创建。
# BOOTSTRAP_ADMIN_ENABLED=true
# BOOTSTRAP_ADMIN_USERNAME=admin
# BOOTSTRAP_ADMIN_EMAIL=admin@example.com
# BOOTSTRAP_ADMIN_PASSWORD=change-me-strong-password

# SMTP 邮件配置 (可选, 不配置则跳过邮件发送)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USERNAME=noreply@example.com
# SMTP_PASSWORD=your-smtp-password
# SMTP_FROM=Forum <noreply@example.com>
# FRONTEND_URL=http://localhost:3000

# 测试数据库 (仅用于集成测试)
# TEST_DATABASE_URL=postgresql://username:password@localhost:5432/forum_test_db

